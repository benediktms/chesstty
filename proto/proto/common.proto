syntax = "proto3";
package chess;

// ============================================================================
// Core Data Types
// ============================================================================

message MoveRepr {
  string from = 1;
  string to = 2;
  optional string promotion = 3;
}

message MoveRecord {
  string from = 1;
  string to = 2;
  string piece = 3;
  optional string captured = 4;
  string san = 5;
  string fen_after = 6;
  optional string promotion = 7;
}

message MoveDetail {
  string from = 1;
  string to = 2;
  optional string promotion = 3;
  string san = 4;
  bool is_capture = 5;
  bool is_check = 6;
  bool is_checkmate = 7;
}

message EngineAnalysis {
  optional uint32 depth = 1;
  optional uint32 seldepth = 2;
  optional uint64 time_ms = 3;
  optional uint64 nodes = 4;
  optional string score = 5;
  repeated string pv = 6;
  optional uint64 nps = 7;
}

// Kept for backward compat with EngineThinkingEvent
message EngineInfo {
  optional uint32 depth = 1;
  optional uint32 seldepth = 2;
  optional uint64 time_ms = 3;
  optional uint64 nodes = 4;
  optional string score = 5;
  repeated string pv = 6;
  optional uint64 nps = 7;
}

enum GameStatus {
  ONGOING = 0;
  WON = 1;
  DRAWN = 2;
}

enum GamePhase {
  GAME_PHASE_SETUP = 0;
  GAME_PHASE_PLAYING = 1;
  GAME_PHASE_PAUSED = 2;
  GAME_PHASE_ENDED = 3;
  GAME_PHASE_ANALYZING = 4;
}

message LastMove {
  string from = 1;
  string to = 2;
}

enum GameModeType {
  HUMAN_VS_HUMAN = 0;
  HUMAN_VS_ENGINE = 1;
  ENGINE_VS_ENGINE = 2;
  ANALYSIS = 3;
  REVIEW = 4;
}

enum PlayerSideProto {
  WHITE = 0;
  BLACK = 1;
}

message GameModeProto {
  GameModeType mode = 1;
  optional PlayerSideProto human_side = 2;  // Only for HUMAN_VS_ENGINE
}

message TimerState {
  uint64 white_remaining_ms = 1;
  uint64 black_remaining_ms = 2;
  optional string active_side = 3;
}

message Empty {}
